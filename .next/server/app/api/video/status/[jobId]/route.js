"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/video/status/[jobId]/route";
exports.ids = ["app/api/video/status/[jobId]/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&page=%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&page=%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Deborah_Documents_Cursor_Projects_chatpye_src_app_api_video_status_jobId_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/video/status/[jobId]/route.ts */ \"(rsc)/./src/app/api/video/status/[jobId]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/video/status/[jobId]/route\",\n        pathname: \"/api/video/status/[jobId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/video/status/[jobId]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Deborah\\\\Documents\\\\Cursor Projects\\\\chatpye\\\\src\\\\app\\\\api\\\\video\\\\status\\\\[jobId]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Deborah_Documents_Cursor_Projects_chatpye_src_app_api_video_status_jobId_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/video/status/[jobId]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2aWRlbyUyRnN0YXR1cyUyRiU1QmpvYklkJTVEJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ2aWRlbyUyRnN0YXR1cyUyRiU1QmpvYklkJTVEJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdmlkZW8lMkZzdGF0dXMlMkYlNUJqb2JJZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNEZWJvcmFoJTVDRG9jdW1lbnRzJTVDQ3Vyc29yJTIwUHJvamVjdHMlNUNjaGF0cHllJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNEZWJvcmFoJTVDRG9jdW1lbnRzJTVDQ3Vyc29yJTIwUHJvamVjdHMlNUNjaGF0cHllJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dEO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hhdHB5ZS8/ZTRlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxEZWJvcmFoXFxcXERvY3VtZW50c1xcXFxDdXJzb3IgUHJvamVjdHNcXFxcY2hhdHB5ZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx2aWRlb1xcXFxzdGF0dXNcXFxcW2pvYklkXVxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdmlkZW8vc3RhdHVzL1tqb2JJZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS92aWRlby9zdGF0dXMvW2pvYklkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdmlkZW8vc3RhdHVzL1tqb2JJZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxEZWJvcmFoXFxcXERvY3VtZW50c1xcXFxDdXJzb3IgUHJvamVjdHNcXFxcY2hhdHB5ZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx2aWRlb1xcXFxzdGF0dXNcXFxcW2pvYklkXVxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS92aWRlby9zdGF0dXMvW2pvYklkXS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&page=%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/video/status/[jobId]/route.ts":
/*!***************************************************!*\
  !*** ./src/app/api/video/status/[jobId]/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n\n\nasync function GET(request, { params }) {\n    try {\n        const jobId = params.jobId;\n        if (!jobId) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Job ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Fetching job status for:\", jobId);\n        const job = await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_1__.getVideoJob)(jobId);\n        if (!job) {\n            console.log(\"Job not found:\", jobId);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Job not found\"\n            }, {\n                status: 404\n            });\n        }\n        console.log(\"Job status:\", job.status, \"Progress:\", job.progress);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(job);\n    } catch (error) {\n        console.error(\"Error in status endpoint:\", error);\n        // Return a more detailed error response\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Failed to fetch job status\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS92aWRlby9zdGF0dXMvW2pvYklkXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMEM7QUFDQztBQUVwQyxlQUFlRSxJQUNwQkMsT0FBZ0IsRUFDaEIsRUFBRUMsTUFBTSxFQUFpQztJQUV6QyxJQUFJO1FBQ0YsTUFBTUMsUUFBUUQsT0FBT0MsS0FBSztRQUMxQixJQUFJLENBQUNBLE9BQU87WUFDVixPQUFPTCxrRkFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFxQixHQUM5QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUFDLFFBQVFDLEdBQUcsQ0FBQyw0QkFBNEJMO1FBQ3hDLE1BQU1NLE1BQU0sTUFBTVYseURBQVdBLENBQUNJO1FBRTlCLElBQUksQ0FBQ00sS0FBSztZQUNSRixRQUFRQyxHQUFHLENBQUMsa0JBQWtCTDtZQUM5QixPQUFPTCxrRkFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFnQixHQUN6QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUFDLFFBQVFDLEdBQUcsQ0FBQyxlQUFlQyxJQUFJSCxNQUFNLEVBQUUsYUFBYUcsSUFBSUMsUUFBUTtRQUNoRSxPQUFPWixrRkFBWUEsQ0FBQ00sSUFBSSxDQUFDSztJQUMzQixFQUFFLE9BQU9KLE9BQU87UUFDZEUsUUFBUUYsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0Msd0NBQXdDO1FBQ3hDLE9BQU9QLGtGQUFZQSxDQUFDTSxJQUFJLENBQ3RCO1lBQ0VDLE9BQU87WUFDUE0sU0FBU04saUJBQWlCTyxRQUFRUCxNQUFNUSxPQUFPLEdBQUc7UUFDcEQsR0FDQTtZQUFFUCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoYXRweWUvLi9zcmMvYXBwL2FwaS92aWRlby9zdGF0dXMvW2pvYklkXS9yb3V0ZS50cz85MzNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBnZXRWaWRlb0pvYiB9IGZyb20gJ0AvbGliL21vbmdvZGInXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxyXG4gIHJlcXVlc3Q6IFJlcXVlc3QsXHJcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgam9iSWQ6IHN0cmluZyB9IH1cclxuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGpvYklkID0gcGFyYW1zLmpvYklkXHJcbiAgICBpZiAoIWpvYklkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnSm9iIElEIGlzIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIGpvYiBzdGF0dXMgZm9yOicsIGpvYklkKVxyXG4gICAgY29uc3Qgam9iID0gYXdhaXQgZ2V0VmlkZW9Kb2Ioam9iSWQpXHJcbiAgICBcclxuICAgIGlmICgham9iKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdKb2Igbm90IGZvdW5kOicsIGpvYklkKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0pvYiBub3QgZm91bmQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZygnSm9iIHN0YXR1czonLCBqb2Iuc3RhdHVzLCAnUHJvZ3Jlc3M6Jywgam9iLnByb2dyZXNzKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGpvYilcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc3RhdHVzIGVuZHBvaW50OicsIGVycm9yKVxyXG4gICAgLy8gUmV0dXJuIGEgbW9yZSBkZXRhaWxlZCBlcnJvciByZXNwb25zZVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGpvYiBzdGF0dXMnLFxyXG4gICAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKVxyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0VmlkZW9Kb2IiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwiam9iSWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwiam9iIiwicHJvZ3Jlc3MiLCJkZXRhaWxzIiwiRXJyb3IiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/video/status/[jobId]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDatabaseConnection: () => (/* binding */ closeDatabaseConnection),\n/* harmony export */   createTranscriptChunks: () => (/* binding */ createTranscriptChunks),\n/* harmony export */   createVideoJob: () => (/* binding */ createVideoJob),\n/* harmony export */   getCachedProactiveAnalysis: () => (/* binding */ getCachedProactiveAnalysis),\n/* harmony export */   getCachedQAResponse: () => (/* binding */ getCachedQAResponse),\n/* harmony export */   getCollections: () => (/* binding */ getCollections),\n/* harmony export */   getTranscriptChunks: () => (/* binding */ getTranscriptChunks),\n/* harmony export */   getVideoJob: () => (/* binding */ getVideoJob),\n/* harmony export */   saveQAResponse: () => (/* binding */ saveQAResponse),\n/* harmony export */   updateTranscriptChunkEmbeddings: () => (/* binding */ updateTranscriptChunkEmbeddings),\n/* harmony export */   updateVideoJob: () => (/* binding */ updateVideoJob)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nconst MONGODB_DB_NAME = process.env.MONGODB_DB_NAME || \"chatpye_db\"; // Default DB name\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable in .env.local\");\n}\nlet client = null;\nlet db = null;\nconst collections = {};\nasync function connectToDatabase() {\n    if (db && client) {\n        // TODO: Verify client connection state if possible, e.g. client.isConnected()\n        // For serverless, creating new connections per request or short-lived connections might be okay.\n        // For long-running servers, maintaining a persistent connection is better.\n        // This simple check assumes client remains connected.\n        return db;\n    }\n    if (!MONGODB_URI) {\n        throw new Error(\"MongoDB URI is not defined.\");\n    }\n    client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(MONGODB_URI, {\n        serverApi: mongodb__WEBPACK_IMPORTED_MODULE_0__.ServerApiVersion.v1,\n        tls: true,\n        tlsAllowInvalidCertificates: false,\n        tlsAllowInvalidHostnames: false,\n        maxPoolSize: 50,\n        minPoolSize: 10,\n        maxIdleTimeMS: 60000,\n        connectTimeoutMS: 30000,\n        socketTimeoutMS: 45000,\n        retryWrites: true,\n        retryReads: true,\n        directConnection: false\n    });\n    try {\n        await client.connect();\n        db = client.db(MONGODB_DB_NAME);\n        console.log(\"Successfully connected to MongoDB.\");\n        // Initialize collections\n        collections.videoJobsCollection = db.collection(\"videoJobs\");\n        collections.transcriptChunksCollection = db.collection(\"transcriptChunks\");\n        collections.cachedVideoQACollection = db.collection(\"cachedVideoQA\");\n        // Create Indexes (idempotent - only creates if they don't exist)\n        await collections.videoJobsCollection.createIndex({\n            jobId: 1\n        }, {\n            unique: true\n        });\n        await collections.transcriptChunksCollection.createIndex({\n            jobId: 1,\n            chunkId: 1\n        }, {\n            unique: true\n        });\n        await collections.transcriptChunksCollection.createIndex({\n            jobId: 1\n        }); // For fetching all chunks for a job\n        await collections.cachedVideoQACollection.createIndex({\n            jobId: 1,\n            questionTextNormalized: 1,\n            modelUsed: 1,\n            cacheType: 1\n        }, {\n            name: \"user_question_cache_idx\"\n        });\n        await collections.cachedVideoQACollection.createIndex({\n            jobId: 1,\n            analysisType: 1,\n            modelUsed: 1,\n            cacheType: 1\n        }, {\n            name: \"proactive_analysis_cache_idx\"\n        });\n        return db;\n    } catch (error) {\n        console.error(\"Failed to connect to MongoDB:\", error);\n        client = null; // Reset client on failure\n        db = null; // Reset db on failure\n        throw error;\n    }\n}\n// Export a function to get specific collections, ensuring DB connection\nasync function getCollections() {\n    if (!db || !client) {\n        await connectToDatabase();\n    }\n    if (!collections.videoJobsCollection || !collections.transcriptChunksCollection || !collections.cachedVideoQACollection) {\n        // This might happen if connectToDatabase was called but collections weren't set (shouldn't occur with current logic)\n        // Or if db connection was lost and re-established without re-setting collections object.\n        // For simplicity, re-run connectToDatabase which also sets collections.\n        await connectToDatabase();\n    }\n    return collections;\n}\n// --- Video Job Functions ---\nasync function createVideoJob(jobData) {\n    const { videoJobsCollection } = await getCollections();\n    if (!videoJobsCollection) throw new Error(\"videoJobsCollection not initialized\");\n    const newJob = {\n        ...jobData,\n        status: jobData.status || \"pending\",\n        createdAt: new Date(),\n        updatedAt: new Date()\n    };\n    const result = await videoJobsCollection.insertOne(newJob);\n    if (!result.insertedId) {\n        throw new Error(\"Failed to create video job.\");\n    }\n    return {\n        ...newJob,\n        _id: result.insertedId\n    };\n}\nasync function getVideoJob(jobId) {\n    const { videoJobsCollection } = await getCollections();\n    if (!videoJobsCollection) throw new Error(\"videoJobsCollection not initialized\");\n    return videoJobsCollection.findOne({\n        jobId\n    });\n}\nasync function updateVideoJob(jobId, updates) {\n    const { videoJobsCollection } = await getCollections();\n    if (!videoJobsCollection) throw new Error(\"videoJobsCollection not initialized\");\n    const result = await videoJobsCollection.updateOne({\n        jobId\n    }, {\n        $set: {\n            ...updates,\n            updatedAt: new Date()\n        }\n    });\n    return result.modifiedCount > 0;\n}\n// --- Transcript Chunk Functions ---\nasync function createTranscriptChunks(chunksData) {\n    const { transcriptChunksCollection } = await getCollections();\n    if (!transcriptChunksCollection) throw new Error(\"transcriptChunksCollection not initialized\");\n    if (chunksData.length === 0) return;\n    const chunksToInsert = chunksData.map((chunk)=>({\n            ...chunk,\n            createdAt: new Date()\n        }));\n    await transcriptChunksCollection.insertMany(chunksToInsert);\n}\nasync function getTranscriptChunks(jobId) {\n    const { transcriptChunksCollection } = await getCollections();\n    if (!transcriptChunksCollection) throw new Error(\"transcriptChunksCollection not initialized\");\n    return transcriptChunksCollection.find({\n        jobId\n    }).sort({\n        startTimestamp: 1\n    }).toArray(); // Sort by start time\n}\nasync function updateTranscriptChunkEmbeddings(jobId, chunkId, embedding) {\n    const { transcriptChunksCollection } = await getCollections();\n    if (!transcriptChunksCollection) throw new Error(\"transcriptChunksCollection not initialized\");\n    const result = await transcriptChunksCollection.updateOne({\n        jobId,\n        chunkId\n    }, {\n        $set: {\n            embedding\n        }\n    });\n    return result.modifiedCount > 0;\n}\n// --- Q&A Cache Functions ---\nasync function getCachedQAResponse(jobId, normalizedQuestionText, modelUsed) {\n    const { cachedVideoQACollection } = await getCollections();\n    if (!cachedVideoQACollection) throw new Error(\"cachedVideoQACollection not initialized\");\n    // console.log(`CACHE_LOOKUP: jobId=${jobId}, question='${normalizedQuestionText}', model='${modelUsed}'`); // Debug\n    const response = await cachedVideoQACollection.findOne({\n        jobId,\n        questionTextNormalized: normalizedQuestionText,\n        modelUsed,\n        cacheType: \"user_question\"\n    });\n    // if (response) console.log(\"CACHE_HIT\"); else console.log(\"CACHE_MISS\"); // Debug\n    return response;\n}\nasync function getCachedProactiveAnalysis(jobId, analysisType, modelUsed) {\n    const { cachedVideoQACollection } = await getCollections();\n    if (!cachedVideoQACollection) throw new Error(\"cachedVideoQACollection not initialized\");\n    return cachedVideoQACollection.findOne({\n        jobId,\n        analysisType,\n        modelUsed,\n        cacheType: \"proactive_analysis\"\n    });\n}\nasync function saveQAResponse(jobId, questionOrAnalysisType, modelUsed, responseText, cacheType = \"user_question\" // Default to user_question\n) {\n    const { cachedVideoQACollection } = await getCollections();\n    if (!cachedVideoQACollection) throw new Error(\"cachedVideoQACollection not initialized\");\n    const now = new Date();\n    let filter;\n    let updateData;\n    if (cacheType === \"user_question\") {\n        filter = {\n            jobId,\n            questionTextNormalized: questionOrAnalysisType,\n            modelUsed,\n            cacheType\n        };\n        updateData = {\n            $set: {\n                responseText,\n                updatedAt: now\n            },\n            $setOnInsert: {\n                jobId,\n                questionTextNormalized: questionOrAnalysisType,\n                modelUsed,\n                cacheType,\n                createdAt: now\n            }\n        };\n    } else {\n        filter = {\n            jobId,\n            analysisType: questionOrAnalysisType,\n            modelUsed,\n            cacheType\n        };\n        updateData = {\n            $set: {\n                responseText,\n                updatedAt: now\n            },\n            $setOnInsert: {\n                jobId,\n                analysisType: questionOrAnalysisType,\n                modelUsed,\n                cacheType,\n                createdAt: now\n            }\n        };\n    }\n    try {\n        // console.log(`CACHE_SAVE: jobId=${jobId}, key='${questionOrAnalysisType}', model='${modelUsed}', type='${cacheType}'`); // Debug\n        await cachedVideoQACollection.updateOne(filter, updateData, {\n            upsert: true\n        });\n    // console.log(\"CACHE_SAVE successful\"); // Debug\n    } catch (error) {\n        console.error(\"Error saving Q&A response to cache:\", error);\n    // Decide if this error should be propagated or just logged\n    // For async background saves, logging might be sufficient.\n    }\n}\n// Optional: Function to clear MongoDB client connection (e.g., for graceful shutdown)\nasync function closeDatabaseConnection() {\n    if (client) {\n        await client.close();\n        client = null;\n        db = null;\n        console.log(\"MongoDB connection closed.\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFDLFlBQVk7WUFBRUUsUUFBUTtRQUFLO0lBQzNFLGlEQUFpRDtJQUNuRCxFQUFFLE9BQU83QyxPQUFPO1FBQ2RmLFFBQVFlLEtBQUssQ0FBQyx1Q0FBdUNBO0lBQ3JELDJEQUEyRDtJQUMzRCwyREFBMkQ7SUFDN0Q7QUFDRjtBQUVBLHNGQUFzRjtBQUMvRSxlQUFlOEM7SUFDcEIsSUFBSS9FLFFBQVE7UUFDVixNQUFNQSxPQUFPZ0YsS0FBSztRQUNsQmhGLFNBQVM7UUFDVEMsS0FBSztRQUNMaUIsUUFBUUMsR0FBRyxDQUFDO0lBQ2Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoYXRweWUvLi9zcmMvbGliL21vbmdvZGIudHM/NTNjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb2xsZWN0aW9uLCBEYiwgTW9uZ29DbGllbnQsIFNlcnZlckFwaVZlcnNpb24sIE9iamVjdElkIH0gZnJvbSAnbW9uZ29kYic7XHJcblxyXG4vLyBEZWZpbmUgaW50ZXJmYWNlcyBmb3IgeW91ciBkYXRhIHN0cnVjdHVyZXNcclxuZXhwb3J0IGludGVyZmFjZSBWaWRlb0pvYiB7XHJcbiAgX2lkPzogT2JqZWN0SWQ7XHJcbiAgam9iSWQ6IHN0cmluZztcclxuICB5b3V0dWJlVXJsOiBzdHJpbmc7XHJcbiAgc3RhdHVzOiAncGVuZGluZycgfCAncHJvY2Vzc2luZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnO1xyXG4gIHRyYW5zY3JpcHRTdGF0dXM/OiAncHJvY2Vzc2luZycgfCAnZm91bmQnIHwgJ25vdF9mb3VuZCcgfCAnZmFpbGVkJyB8ICdlcnJvcic7XHJcbiAgcHJvZ3Jlc3M/OiBzdHJpbmc7IC8vIE9wdGlvbmFsIHByb2dyZXNzIG1lc3NhZ2VcclxuICBjcmVhdGVkQXQ/OiBEYXRlO1xyXG4gIHVwZGF0ZWRBdD86IERhdGU7XHJcbiAgLy8gWW91IG1pZ2h0IGFkZCBtb3JlIGZpZWxkcyBsaWtlIHZpZGVvVGl0bGUsIGR1cmF0aW9uLCBldGMuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNjcmlwdENodW5rIHtcclxuICBfaWQ/OiBPYmplY3RJZDtcclxuICBqb2JJZDogc3RyaW5nO1xyXG4gIGNodW5rSWQ6IHN0cmluZzsgLy8gZS5nLiwgam9iSWQtY2h1bmtJbmRleFxyXG4gIHRleHRDb250ZW50OiBzdHJpbmc7XHJcbiAgc3RhcnRUaW1lc3RhbXA6IHN0cmluZzsgLy8gU3RvcmUgYXMgc3RyaW5nLCBjb25zaXN0ZW50IHdpdGggY3VycmVudCBSQUcgdXNlXHJcbiAgZW5kVGltZXN0YW1wOiBzdHJpbmc7ICAgLy8gU3RvcmUgYXMgc3RyaW5nXHJcbiAgZW1iZWRkaW5nPzogbnVtYmVyW107IC8vIEFycmF5IG9mIG51bWJlcnMgZm9yIHRoZSBlbWJlZGRpbmdcclxuICBjcmVhdGVkQXQ/OiBEYXRlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlZFFBUmVzcG9uc2Uge1xyXG4gIF9pZD86IE9iamVjdElkO1xyXG4gIGpvYklkOiBzdHJpbmc7IC8vIFJlZmVyZW5jZXMgdGhlIFZpZGVvSm9iLmpvYklkIChpZGVudGlmaWVzIHRoZSB2aWRlbylcclxuICBjYWNoZVR5cGU6ICd1c2VyX3F1ZXN0aW9uJyB8ICdwcm9hY3RpdmVfYW5hbHlzaXMnO1xyXG4gIHF1ZXN0aW9uVGV4dE5vcm1hbGl6ZWQ/OiBzdHJpbmc7IC8vIEZvciB1c2VyX3F1ZXN0aW9uIHR5cGVcclxuICBhbmFseXNpc1R5cGU/OiBzdHJpbmc7IC8vIEZvciBwcm9hY3RpdmVfYW5hbHlzaXMgdHlwZSAoZS5nLiwgXCJwcm9hY3RpdmVfc3VtbWFyeV90b3BpY3NfdGFrZWF3YXlzXCIpXHJcbiAgcmVzcG9uc2VUZXh0OiBzdHJpbmc7XHJcbiAgbW9kZWxVc2VkOiBzdHJpbmc7IC8vIGUuZy4sIFwiZ2VtaW5pLTEuNS1wcm8tZGlyZWN0LXlvdXR1YmVcIlxyXG4gIGNyZWF0ZWRBdDogRGF0ZTtcclxuICB1cGRhdGVkQXQ6IERhdGU7IC8vIFRvIGtub3cgd2hlbiBpdCB3YXMgbGFzdCB1cGRhdGVkIChmb3IgdXBzZXJ0KVxyXG4gIC8vIHNvdXJjZUxhbmd1YWdlPzogc3RyaW5nOyAvLyBGdXR1cmUgdXNlXHJcbiAgLy8gc3RydWN0dXJlZFJlc3BvbnNlRGF0YT86IGFueTsgLy8gRnV0dXJlIHVzZSBmb3Igc3RydWN0dXJlZCBwcm9hY3RpdmUgYW5hbHlzaXNcclxufVxyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcclxuY29uc3QgTU9OR09EQl9EQl9OQU1FID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9EQl9OQU1FIHx8ICdjaGF0cHllX2RiJzsgLy8gRGVmYXVsdCBEQiBuYW1lXHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbiAuZW52LmxvY2FsJyk7XHJcbn1cclxuXHJcbmxldCBjbGllbnQ6IE1vbmdvQ2xpZW50IHwgbnVsbCA9IG51bGw7XHJcbmxldCBkYjogRGIgfCBudWxsID0gbnVsbDtcclxuXHJcbmludGVyZmFjZSBDb2xsZWN0aW9ucyB7XHJcbiAgdmlkZW9Kb2JzQ29sbGVjdGlvbj86IENvbGxlY3Rpb248VmlkZW9Kb2I+O1xyXG4gIHRyYW5zY3JpcHRDaHVua3NDb2xsZWN0aW9uPzogQ29sbGVjdGlvbjxUcmFuc2NyaXB0Q2h1bms+O1xyXG4gIGNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uPzogQ29sbGVjdGlvbjxDYWNoZWRRQVJlc3BvbnNlPjtcclxufVxyXG5cclxuY29uc3QgY29sbGVjdGlvbnM6IENvbGxlY3Rpb25zID0ge307XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpOiBQcm9taXNlPERiPiB7XHJcbiAgaWYgKGRiICYmIGNsaWVudCkge1xyXG4gICAgLy8gVE9ETzogVmVyaWZ5IGNsaWVudCBjb25uZWN0aW9uIHN0YXRlIGlmIHBvc3NpYmxlLCBlLmcuIGNsaWVudC5pc0Nvbm5lY3RlZCgpXHJcbiAgICAvLyBGb3Igc2VydmVybGVzcywgY3JlYXRpbmcgbmV3IGNvbm5lY3Rpb25zIHBlciByZXF1ZXN0IG9yIHNob3J0LWxpdmVkIGNvbm5lY3Rpb25zIG1pZ2h0IGJlIG9rYXkuXHJcbiAgICAvLyBGb3IgbG9uZy1ydW5uaW5nIHNlcnZlcnMsIG1haW50YWluaW5nIGEgcGVyc2lzdGVudCBjb25uZWN0aW9uIGlzIGJldHRlci5cclxuICAgIC8vIFRoaXMgc2ltcGxlIGNoZWNrIGFzc3VtZXMgY2xpZW50IHJlbWFpbnMgY29ubmVjdGVkLlxyXG4gICAgcmV0dXJuIGRiO1xyXG4gIH1cclxuXHJcbiAgaWYgKCFNT05HT0RCX1VSSSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdNb25nb0RCIFVSSSBpcyBub3QgZGVmaW5lZC4nKTtcclxuICB9XHJcblxyXG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChNT05HT0RCX1VSSSwge1xyXG4gICAgc2VydmVyQXBpOiBTZXJ2ZXJBcGlWZXJzaW9uLnYxLFxyXG4gICAgdGxzOiB0cnVlLFxyXG4gICAgdGxzQWxsb3dJbnZhbGlkQ2VydGlmaWNhdGVzOiBmYWxzZSxcclxuICAgIHRsc0FsbG93SW52YWxpZEhvc3RuYW1lczogZmFsc2UsXHJcbiAgICBtYXhQb29sU2l6ZTogNTAsXHJcbiAgICBtaW5Qb29sU2l6ZTogMTAsXHJcbiAgICBtYXhJZGxlVGltZU1TOiA2MDAwMCxcclxuICAgIGNvbm5lY3RUaW1lb3V0TVM6IDMwMDAwLFxyXG4gICAgc29ja2V0VGltZW91dE1TOiA0NTAwMCxcclxuICAgIHJldHJ5V3JpdGVzOiB0cnVlLFxyXG4gICAgcmV0cnlSZWFkczogdHJ1ZSxcclxuICAgIGRpcmVjdENvbm5lY3Rpb246IGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xyXG4gICAgZGIgPSBjbGllbnQuZGIoTU9OR09EQl9EQl9OQU1FKTtcclxuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE1vbmdvREIuJyk7XHJcblxyXG4gICAgLy8gSW5pdGlhbGl6ZSBjb2xsZWN0aW9uc1xyXG4gICAgY29sbGVjdGlvbnMudmlkZW9Kb2JzQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb248VmlkZW9Kb2I+KCd2aWRlb0pvYnMnKTtcclxuICAgIGNvbGxlY3Rpb25zLnRyYW5zY3JpcHRDaHVua3NDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbjxUcmFuc2NyaXB0Q2h1bms+KCd0cmFuc2NyaXB0Q2h1bmtzJyk7XHJcbiAgICBjb2xsZWN0aW9ucy5jYWNoZWRWaWRlb1FBQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb248Q2FjaGVkUUFSZXNwb25zZT4oJ2NhY2hlZFZpZGVvUUEnKTtcclxuICAgIFxyXG4gICAgLy8gQ3JlYXRlIEluZGV4ZXMgKGlkZW1wb3RlbnQgLSBvbmx5IGNyZWF0ZXMgaWYgdGhleSBkb24ndCBleGlzdClcclxuICAgIGF3YWl0IGNvbGxlY3Rpb25zLnZpZGVvSm9ic0NvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBqb2JJZDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcclxuICAgIGF3YWl0IGNvbGxlY3Rpb25zLnRyYW5zY3JpcHRDaHVua3NDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgam9iSWQ6IDEsIGNodW5rSWQ6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XHJcbiAgICBhd2FpdCBjb2xsZWN0aW9ucy50cmFuc2NyaXB0Q2h1bmtzQ29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGpvYklkOiAxIH0pOyAvLyBGb3IgZmV0Y2hpbmcgYWxsIGNodW5rcyBmb3IgYSBqb2JcclxuICAgIGF3YWl0IGNvbGxlY3Rpb25zLmNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KFxyXG4gICAgICAgIHsgam9iSWQ6IDEsIHF1ZXN0aW9uVGV4dE5vcm1hbGl6ZWQ6IDEsIG1vZGVsVXNlZDogMSwgY2FjaGVUeXBlOiAxIH0sXHJcbiAgICAgICAgeyBuYW1lOiBcInVzZXJfcXVlc3Rpb25fY2FjaGVfaWR4XCIgfVxyXG4gICAgKTtcclxuICAgIGF3YWl0IGNvbGxlY3Rpb25zLmNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uLmNyZWF0ZUluZGV4KFxyXG4gICAgICAgIHsgam9iSWQ6IDEsIGFuYWx5c2lzVHlwZTogMSwgbW9kZWxVc2VkOiAxLCBjYWNoZVR5cGU6IDEgfSxcclxuICAgICAgICB7IG5hbWU6IFwicHJvYWN0aXZlX2FuYWx5c2lzX2NhY2hlX2lkeFwiIH1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGRiO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY29ubmVjdCB0byBNb25nb0RCOicsIGVycm9yKTtcclxuICAgIGNsaWVudCA9IG51bGw7IC8vIFJlc2V0IGNsaWVudCBvbiBmYWlsdXJlXHJcbiAgICBkYiA9IG51bGw7ICAgICAvLyBSZXNldCBkYiBvbiBmYWlsdXJlXHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIEV4cG9ydCBhIGZ1bmN0aW9uIHRvIGdldCBzcGVjaWZpYyBjb2xsZWN0aW9ucywgZW5zdXJpbmcgREIgY29ubmVjdGlvblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29sbGVjdGlvbnMoKTogUHJvbWlzZTxDb2xsZWN0aW9ucz4ge1xyXG4gIGlmICghZGIgfHwgIWNsaWVudCkgeyAvLyBPciBhZGQgbW9yZSByb2J1c3QgY29ubmVjdGlvbiBjaGVja1xyXG4gICAgYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICB9XHJcbiAgaWYgKCFjb2xsZWN0aW9ucy52aWRlb0pvYnNDb2xsZWN0aW9uIHx8ICFjb2xsZWN0aW9ucy50cmFuc2NyaXB0Q2h1bmtzQ29sbGVjdGlvbiB8fCAhY29sbGVjdGlvbnMuY2FjaGVkVmlkZW9RQUNvbGxlY3Rpb24pIHtcclxuICAgIC8vIFRoaXMgbWlnaHQgaGFwcGVuIGlmIGNvbm5lY3RUb0RhdGFiYXNlIHdhcyBjYWxsZWQgYnV0IGNvbGxlY3Rpb25zIHdlcmVuJ3Qgc2V0IChzaG91bGRuJ3Qgb2NjdXIgd2l0aCBjdXJyZW50IGxvZ2ljKVxyXG4gICAgLy8gT3IgaWYgZGIgY29ubmVjdGlvbiB3YXMgbG9zdCBhbmQgcmUtZXN0YWJsaXNoZWQgd2l0aG91dCByZS1zZXR0aW5nIGNvbGxlY3Rpb25zIG9iamVjdC5cclxuICAgIC8vIEZvciBzaW1wbGljaXR5LCByZS1ydW4gY29ubmVjdFRvRGF0YWJhc2Ugd2hpY2ggYWxzbyBzZXRzIGNvbGxlY3Rpb25zLlxyXG4gICAgYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbGxlY3Rpb25zO1xyXG59XHJcblxyXG4vLyAtLS0gVmlkZW8gSm9iIEZ1bmN0aW9ucyAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVZpZGVvSm9iKGpvYkRhdGE6IE9taXQ8VmlkZW9Kb2IsICdfaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4pOiBQcm9taXNlPFZpZGVvSm9iPiB7XHJcbiAgY29uc3QgeyB2aWRlb0pvYnNDb2xsZWN0aW9uIH0gPSBhd2FpdCBnZXRDb2xsZWN0aW9ucygpO1xyXG4gIGlmICghdmlkZW9Kb2JzQ29sbGVjdGlvbikgdGhyb3cgbmV3IEVycm9yKFwidmlkZW9Kb2JzQ29sbGVjdGlvbiBub3QgaW5pdGlhbGl6ZWRcIik7XHJcblxyXG4gIGNvbnN0IG5ld0pvYjogVmlkZW9Kb2IgPSB7XHJcbiAgICAuLi5qb2JEYXRhLFxyXG4gICAgc3RhdHVzOiBqb2JEYXRhLnN0YXR1cyB8fCAncGVuZGluZycsXHJcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgfTtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCB2aWRlb0pvYnNDb2xsZWN0aW9uLmluc2VydE9uZShuZXdKb2IpO1xyXG4gIGlmICghcmVzdWx0Lmluc2VydGVkSWQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSB2aWRlbyBqb2IuJyk7XHJcbiAgfVxyXG4gIHJldHVybiB7IC4uLm5ld0pvYiwgX2lkOiByZXN1bHQuaW5zZXJ0ZWRJZCB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9Kb2Ioam9iSWQ6IHN0cmluZyk6IFByb21pc2U8VmlkZW9Kb2IgfCBudWxsPiB7XHJcbiAgY29uc3QgeyB2aWRlb0pvYnNDb2xsZWN0aW9uIH0gPSBhd2FpdCBnZXRDb2xsZWN0aW9ucygpO1xyXG4gIGlmICghdmlkZW9Kb2JzQ29sbGVjdGlvbikgdGhyb3cgbmV3IEVycm9yKFwidmlkZW9Kb2JzQ29sbGVjdGlvbiBub3QgaW5pdGlhbGl6ZWRcIik7XHJcbiAgcmV0dXJuIHZpZGVvSm9ic0NvbGxlY3Rpb24uZmluZE9uZSh7IGpvYklkIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmlkZW9Kb2Ioam9iSWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxWaWRlb0pvYj4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBjb25zdCB7IHZpZGVvSm9ic0NvbGxlY3Rpb24gfSA9IGF3YWl0IGdldENvbGxlY3Rpb25zKCk7XHJcbiAgaWYgKCF2aWRlb0pvYnNDb2xsZWN0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJ2aWRlb0pvYnNDb2xsZWN0aW9uIG5vdCBpbml0aWFsaXplZFwiKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdmlkZW9Kb2JzQ29sbGVjdGlvbi51cGRhdGVPbmUoXHJcbiAgICB7IGpvYklkIH0sXHJcbiAgICB7ICRzZXQ6IHsgLi4udXBkYXRlcywgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpIH0gfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdC5tb2RpZmllZENvdW50ID4gMDtcclxufVxyXG5cclxuLy8gLS0tIFRyYW5zY3JpcHQgQ2h1bmsgRnVuY3Rpb25zIC0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVHJhbnNjcmlwdENodW5rcyhjaHVua3NEYXRhOiBUcmFuc2NyaXB0Q2h1bmtbXSk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHsgdHJhbnNjcmlwdENodW5rc0NvbGxlY3Rpb24gfSA9IGF3YWl0IGdldENvbGxlY3Rpb25zKCk7XHJcbiAgaWYgKCF0cmFuc2NyaXB0Q2h1bmtzQ29sbGVjdGlvbikgdGhyb3cgbmV3IEVycm9yKFwidHJhbnNjcmlwdENodW5rc0NvbGxlY3Rpb24gbm90IGluaXRpYWxpemVkXCIpO1xyXG4gIGlmIChjaHVua3NEYXRhLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICBjb25zdCBjaHVua3NUb0luc2VydCA9IGNodW5rc0RhdGEubWFwKGNodW5rID0+ICh7XHJcbiAgICAgIC4uLmNodW5rLFxyXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKClcclxuICB9KSk7XHJcbiAgYXdhaXQgdHJhbnNjcmlwdENodW5rc0NvbGxlY3Rpb24uaW5zZXJ0TWFueShjaHVua3NUb0luc2VydCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc2NyaXB0Q2h1bmtzKGpvYklkOiBzdHJpbmcpOiBQcm9taXNlPFRyYW5zY3JpcHRDaHVua1tdPiB7XHJcbiAgY29uc3QgeyB0cmFuc2NyaXB0Q2h1bmtzQ29sbGVjdGlvbiB9ID0gYXdhaXQgZ2V0Q29sbGVjdGlvbnMoKTtcclxuICBpZiAoIXRyYW5zY3JpcHRDaHVua3NDb2xsZWN0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJ0cmFuc2NyaXB0Q2h1bmtzQ29sbGVjdGlvbiBub3QgaW5pdGlhbGl6ZWRcIik7XHJcbiAgcmV0dXJuIHRyYW5zY3JpcHRDaHVua3NDb2xsZWN0aW9uLmZpbmQoeyBqb2JJZCB9KS5zb3J0KHsgc3RhcnRUaW1lc3RhbXA6IDEgfSkudG9BcnJheSgpOyAvLyBTb3J0IGJ5IHN0YXJ0IHRpbWVcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRyYW5zY3JpcHRDaHVua0VtYmVkZGluZ3Moam9iSWQ6IHN0cmluZywgY2h1bmtJZDogc3RyaW5nLCBlbWJlZGRpbmc6IG51bWJlcltdKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCB7IHRyYW5zY3JpcHRDaHVua3NDb2xsZWN0aW9uIH0gPSBhd2FpdCBnZXRDb2xsZWN0aW9ucygpO1xyXG4gICAgaWYgKCF0cmFuc2NyaXB0Q2h1bmtzQ29sbGVjdGlvbikgdGhyb3cgbmV3IEVycm9yKFwidHJhbnNjcmlwdENodW5rc0NvbGxlY3Rpb24gbm90IGluaXRpYWxpemVkXCIpO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYW5zY3JpcHRDaHVua3NDb2xsZWN0aW9uLnVwZGF0ZU9uZShcclxuICAgICAgICB7IGpvYklkLCBjaHVua0lkIH0sXHJcbiAgICAgICAgeyAkc2V0OiB7IGVtYmVkZGluZyB9IH1cclxuICAgICk7XHJcbiAgICByZXR1cm4gcmVzdWx0Lm1vZGlmaWVkQ291bnQgPiAwO1xyXG59XHJcblxyXG4vLyAtLS0gUSZBIENhY2hlIEZ1bmN0aW9ucyAtLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhY2hlZFFBUmVzcG9uc2UoXHJcbiAgam9iSWQ6IHN0cmluZywgXHJcbiAgbm9ybWFsaXplZFF1ZXN0aW9uVGV4dDogc3RyaW5nLCBcclxuICBtb2RlbFVzZWQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPENhY2hlZFFBUmVzcG9uc2UgfCBudWxsPiB7XHJcbiAgY29uc3QgeyBjYWNoZWRWaWRlb1FBQ29sbGVjdGlvbiB9ID0gYXdhaXQgZ2V0Q29sbGVjdGlvbnMoKTtcclxuICBpZiAoIWNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWRWaWRlb1FBQ29sbGVjdGlvbiBub3QgaW5pdGlhbGl6ZWRcIik7XHJcbiAgXHJcbiAgLy8gY29uc29sZS5sb2coYENBQ0hFX0xPT0tVUDogam9iSWQ9JHtqb2JJZH0sIHF1ZXN0aW9uPScke25vcm1hbGl6ZWRRdWVzdGlvblRleHR9JywgbW9kZWw9JyR7bW9kZWxVc2VkfSdgKTsgLy8gRGVidWdcclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uLmZpbmRPbmUoe1xyXG4gICAgam9iSWQsXHJcbiAgICBxdWVzdGlvblRleHROb3JtYWxpemVkOiBub3JtYWxpemVkUXVlc3Rpb25UZXh0LCAvLyBFbnN1cmUgdGhpcyBtYXRjaGVzIHRoZSBmaWVsZCBuYW1lIHVzZWQgaW4gc2F2ZVFBUmVzcG9uc2VcclxuICAgIG1vZGVsVXNlZCxcclxuICAgIGNhY2hlVHlwZTogJ3VzZXJfcXVlc3Rpb24nXHJcbiAgfSk7XHJcbiAgLy8gaWYgKHJlc3BvbnNlKSBjb25zb2xlLmxvZyhcIkNBQ0hFX0hJVFwiKTsgZWxzZSBjb25zb2xlLmxvZyhcIkNBQ0hFX01JU1NcIik7IC8vIERlYnVnXHJcbiAgcmV0dXJuIHJlc3BvbnNlO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2FjaGVkUHJvYWN0aXZlQW5hbHlzaXMoXHJcbiAgam9iSWQ6IHN0cmluZyxcclxuICBhbmFseXNpc1R5cGU6IHN0cmluZyxcclxuICBtb2RlbFVzZWQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPENhY2hlZFFBUmVzcG9uc2UgfCBudWxsPiB7XHJcbiAgY29uc3QgeyBjYWNoZWRWaWRlb1FBQ29sbGVjdGlvbiB9ID0gYXdhaXQgZ2V0Q29sbGVjdGlvbnMoKTtcclxuICBpZiAoIWNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uKSB0aHJvdyBuZXcgRXJyb3IoXCJjYWNoZWRWaWRlb1FBQ29sbGVjdGlvbiBub3QgaW5pdGlhbGl6ZWRcIik7XHJcbiAgcmV0dXJuIGNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uLmZpbmRPbmUoe1xyXG4gICAgam9iSWQsXHJcbiAgICBhbmFseXNpc1R5cGUsXHJcbiAgICBtb2RlbFVzZWQsXHJcbiAgICBjYWNoZVR5cGU6ICdwcm9hY3RpdmVfYW5hbHlzaXMnXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlUUFSZXNwb25zZShcclxuICBqb2JJZDogc3RyaW5nLCBcclxuICBxdWVzdGlvbk9yQW5hbHlzaXNUeXBlOiBzdHJpbmcsIC8vIEZvciB1c2VyX3F1ZXN0aW9uLCB0aGlzIGlzIG5vcm1hbGl6ZWRRdWVzdGlvblRleHQ7IGZvciBwcm9hY3RpdmUsIGl0J3MgYW5hbHlzaXNUeXBlXHJcbiAgbW9kZWxVc2VkOiBzdHJpbmcsIFxyXG4gIHJlc3BvbnNlVGV4dDogc3RyaW5nLFxyXG4gIGNhY2hlVHlwZTogJ3VzZXJfcXVlc3Rpb24nIHwgJ3Byb2FjdGl2ZV9hbmFseXNpcycgPSAndXNlcl9xdWVzdGlvbicgLy8gRGVmYXVsdCB0byB1c2VyX3F1ZXN0aW9uXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHsgY2FjaGVkVmlkZW9RQUNvbGxlY3Rpb24gfSA9IGF3YWl0IGdldENvbGxlY3Rpb25zKCk7XHJcbiAgaWYgKCFjYWNoZWRWaWRlb1FBQ29sbGVjdGlvbikgdGhyb3cgbmV3IEVycm9yKFwiY2FjaGVkVmlkZW9RQUNvbGxlY3Rpb24gbm90IGluaXRpYWxpemVkXCIpO1xyXG5cclxuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gIGxldCBmaWx0ZXI6IGFueTtcclxuICBsZXQgdXBkYXRlRGF0YTogYW55O1xyXG5cclxuICBpZiAoY2FjaGVUeXBlID09PSAndXNlcl9xdWVzdGlvbicpIHtcclxuICAgIGZpbHRlciA9IHsgam9iSWQsIHF1ZXN0aW9uVGV4dE5vcm1hbGl6ZWQ6IHF1ZXN0aW9uT3JBbmFseXNpc1R5cGUsIG1vZGVsVXNlZCwgY2FjaGVUeXBlIH07XHJcbiAgICB1cGRhdGVEYXRhID0ge1xyXG4gICAgICAkc2V0OiB7IHJlc3BvbnNlVGV4dCwgdXBkYXRlZEF0OiBub3cgfSxcclxuICAgICAgJHNldE9uSW5zZXJ0OiB7IGpvYklkLCBxdWVzdGlvblRleHROb3JtYWxpemVkOiBxdWVzdGlvbk9yQW5hbHlzaXNUeXBlLCBtb2RlbFVzZWQsIGNhY2hlVHlwZSwgY3JlYXRlZEF0OiBub3cgfVxyXG4gICAgfTtcclxuICB9IGVsc2UgeyAvLyBwcm9hY3RpdmVfYW5hbHlzaXNcclxuICAgIGZpbHRlciA9IHsgam9iSWQsIGFuYWx5c2lzVHlwZTogcXVlc3Rpb25PckFuYWx5c2lzVHlwZSwgbW9kZWxVc2VkLCBjYWNoZVR5cGUgfTtcclxuICAgIHVwZGF0ZURhdGEgPSB7XHJcbiAgICAgICRzZXQ6IHsgcmVzcG9uc2VUZXh0LCB1cGRhdGVkQXQ6IG5vdyB9LFxyXG4gICAgICAkc2V0T25JbnNlcnQ6IHsgam9iSWQsIGFuYWx5c2lzVHlwZTogcXVlc3Rpb25PckFuYWx5c2lzVHlwZSwgbW9kZWxVc2VkLCBjYWNoZVR5cGUsIGNyZWF0ZWRBdDogbm93IH1cclxuICAgIH07XHJcbiAgfVxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhgQ0FDSEVfU0FWRTogam9iSWQ9JHtqb2JJZH0sIGtleT0nJHtxdWVzdGlvbk9yQW5hbHlzaXNUeXBlfScsIG1vZGVsPScke21vZGVsVXNlZH0nLCB0eXBlPScke2NhY2hlVHlwZX0nYCk7IC8vIERlYnVnXHJcbiAgICBhd2FpdCBjYWNoZWRWaWRlb1FBQ29sbGVjdGlvbi51cGRhdGVPbmUoZmlsdGVyLCB1cGRhdGVEYXRhLCB7IHVwc2VydDogdHJ1ZSB9KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKFwiQ0FDSEVfU0FWRSBzdWNjZXNzZnVsXCIpOyAvLyBEZWJ1Z1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2F2aW5nIFEmQSByZXNwb25zZSB0byBjYWNoZTpcIiwgZXJyb3IpO1xyXG4gICAgLy8gRGVjaWRlIGlmIHRoaXMgZXJyb3Igc2hvdWxkIGJlIHByb3BhZ2F0ZWQgb3IganVzdCBsb2dnZWRcclxuICAgIC8vIEZvciBhc3luYyBiYWNrZ3JvdW5kIHNhdmVzLCBsb2dnaW5nIG1pZ2h0IGJlIHN1ZmZpY2llbnQuXHJcbiAgfVxyXG59XHJcblxyXG4vLyBPcHRpb25hbDogRnVuY3Rpb24gdG8gY2xlYXIgTW9uZ29EQiBjbGllbnQgY29ubmVjdGlvbiAoZS5nLiwgZm9yIGdyYWNlZnVsIHNodXRkb3duKVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VEYXRhYmFzZUNvbm5lY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgaWYgKGNsaWVudCkge1xyXG4gICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7XHJcbiAgICBjbGllbnQgPSBudWxsO1xyXG4gICAgZGIgPSBudWxsO1xyXG4gICAgY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGlvbiBjbG9zZWQuJyk7XHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsIlNlcnZlckFwaVZlcnNpb24iLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX0RCX05BTUUiLCJFcnJvciIsImNsaWVudCIsImRiIiwiY29sbGVjdGlvbnMiLCJjb25uZWN0VG9EYXRhYmFzZSIsInNlcnZlckFwaSIsInYxIiwidGxzIiwidGxzQWxsb3dJbnZhbGlkQ2VydGlmaWNhdGVzIiwidGxzQWxsb3dJbnZhbGlkSG9zdG5hbWVzIiwibWF4UG9vbFNpemUiLCJtaW5Qb29sU2l6ZSIsIm1heElkbGVUaW1lTVMiLCJjb25uZWN0VGltZW91dE1TIiwic29ja2V0VGltZW91dE1TIiwicmV0cnlXcml0ZXMiLCJyZXRyeVJlYWRzIiwiZGlyZWN0Q29ubmVjdGlvbiIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIiwidmlkZW9Kb2JzQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJ0cmFuc2NyaXB0Q2h1bmtzQ29sbGVjdGlvbiIsImNhY2hlZFZpZGVvUUFDb2xsZWN0aW9uIiwiY3JlYXRlSW5kZXgiLCJqb2JJZCIsInVuaXF1ZSIsImNodW5rSWQiLCJxdWVzdGlvblRleHROb3JtYWxpemVkIiwibW9kZWxVc2VkIiwiY2FjaGVUeXBlIiwibmFtZSIsImFuYWx5c2lzVHlwZSIsImVycm9yIiwiZ2V0Q29sbGVjdGlvbnMiLCJjcmVhdGVWaWRlb0pvYiIsImpvYkRhdGEiLCJuZXdKb2IiLCJzdGF0dXMiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0IiwicmVzdWx0IiwiaW5zZXJ0T25lIiwiaW5zZXJ0ZWRJZCIsIl9pZCIsImdldFZpZGVvSm9iIiwiZmluZE9uZSIsInVwZGF0ZVZpZGVvSm9iIiwidXBkYXRlcyIsInVwZGF0ZU9uZSIsIiRzZXQiLCJtb2RpZmllZENvdW50IiwiY3JlYXRlVHJhbnNjcmlwdENodW5rcyIsImNodW5rc0RhdGEiLCJsZW5ndGgiLCJjaHVua3NUb0luc2VydCIsIm1hcCIsImNodW5rIiwiaW5zZXJ0TWFueSIsImdldFRyYW5zY3JpcHRDaHVua3MiLCJmaW5kIiwic29ydCIsInN0YXJ0VGltZXN0YW1wIiwidG9BcnJheSIsInVwZGF0ZVRyYW5zY3JpcHRDaHVua0VtYmVkZGluZ3MiLCJlbWJlZGRpbmciLCJnZXRDYWNoZWRRQVJlc3BvbnNlIiwibm9ybWFsaXplZFF1ZXN0aW9uVGV4dCIsInJlc3BvbnNlIiwiZ2V0Q2FjaGVkUHJvYWN0aXZlQW5hbHlzaXMiLCJzYXZlUUFSZXNwb25zZSIsInF1ZXN0aW9uT3JBbmFseXNpc1R5cGUiLCJyZXNwb25zZVRleHQiLCJub3ciLCJmaWx0ZXIiLCJ1cGRhdGVEYXRhIiwiJHNldE9uSW5zZXJ0IiwidXBzZXJ0IiwiY2xvc2VEYXRhYmFzZUNvbm5lY3Rpb24iLCJjbG9zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&page=%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvideo%2Fstatus%2F%5BjobId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CDeborah%5CDocuments%5CCursor%20Projects%5Cchatpye&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();